#!/bin/bash
node app.js \
	--sourceIndex=cookie-v2 --targetIndex=cookie-v3 \
	--alias=cookie \
	--sourceHost=vsdev01 --sourcePort=9243 \
	--targetHost=vsdev01 --targetPort=9243 \
	--targetIndexSettings='{"number_of_shards":1,"number_of_replicas":0,"analysis":{"filter":{"nGram_filter":{"type":"nGram","min_gram":2,"max_gram":20,"token_chars":["letter","digit","punctuation","symbol"]}},"analyzer":{"nGram_analyzer":{"type":"custom","tokenizer":"whitespace","filter":["lowercase","nGram_filter"]},"whitespace_analyzer":{"type":"custom","tokenizer":"whitespace","filter":["lowercase"]}}}}' \
	--mappings='{"recipe":{"dynamic_templates":[{"default_template":{"mapping":{"index":"no"},"match":"*"}}],"properties":{"cooking_time":{"type":"long","index":"no"},"date":{"type":"string","index":"no"},"ingredients":{"properties":{"comment":{"type":"string","index":"no"},"done":{"type":"boolean","index":"no"},"name":{"type":"string"},"quantity":{"type":"float","index":"no"},"quantity_calc":{"type":"float","index":"no"},"unit":{"type":"string","index":"no"}}},"instructions":{"type":"string"},"nutrition":{"properties":{"kcal":{"type":"string","index":"no"}}},"origin":{"properties":{"data_url":{"type":"string","index":"no"},"frontend_url":{"type":"string","index":"no"},"id":{"type":"string","index":"no"},"rating":{"properties":{"average":{"type":"double","index":"no"},"votes":{"type":"long","index":"no"}}},"system":{"type":"string","index":"no"},"user_id":{"type":"string","index":"no"},"user_name":{"type":"string","index":"no"}}},"original_servings":{"type":"long","index":"no"},"pictures":{"properties":{"file":{"type":"string","index":"no"},"user_name":{"type":"string","index":"no"}}},"preparation_time":{"type":"long","index":"no"},"rating":{"properties":{"likes":{"type":"long","index":"no"}}},"resting_time":{"type":"long","index":"no"},"servings":{"type":"long","index":"no"},"skill_level":{"type":"string","index":"no"},"subtitle":{"type":"string","index_analyzer":"nGram_analyzer","search_analyzer":"whitespace_analyzer"},"tags":{"type":"string"},"title":{"type":"string","index_analyzer":"nGram_analyzer","search_analyzer":"whitespace_analyzer","fields":{"raw":{"type":"string","index":"not_analyzed"}}}}},"user":{"properties":{"email":{"type":"string"},"groups":{"properties":{"admin":{"type":"boolean"},"users":{"type":"boolean"}}}}}}'
	